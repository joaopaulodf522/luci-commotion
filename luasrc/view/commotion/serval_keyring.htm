<%+header%>
<!--
LuCI - Lua Configuration Interface

Copyright 2011 Josh King <joshking at newamerica dot net>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0
-->
<%-
   uri = REQUEST_URI
   uri_prefix, num_post = string.gsub(uri, "serval_keyring_.*", "serval_keyring")
-%>

<h1><%:Shared Mesh Keychain%></h1>

<h2 class="warning"><%=Err%></h2>

<p><%:To ensure that only authorized devices can route traffic on your Commotion mesh network, one Shared Mesh Keychain file can be generated and shared by all devices..%></p>

<br /><br />

<h2><%:Download Shared Mesh Keychain%></h2>
<form method="post" action="<%=uri_prefix%>_down" enctype="multipart/form-data" id="down">
  <div id="zone-content-wrapper">
	<div id="zone-content">
	  <div class="cbi-value">
		<label class="cbi-value-title tippable" data-tip="<%:Download your current Shared Mesh Keychain%>"><%:Download your current Serval keyring%></label>
		<input type="hidden" name="dl_key" value="true" />
		<div class="upload-description">
		  <%:Download your current Shared Mesh Keychain%>
		</div>
	  </div>
	</div>
  </div>
  <input type="submit" name="submit" value="<%:Download%>"/>
</form>

<h2><%:Upload Shared Mesh Keychain%></h2>
<form method="post" action="<%=uri_prefix%>_up" enctype="multipart/form-data" id="up">
  <div id="zone-content-wrapper">
	<div id="zone-content">
	  <div class="cbi-value">
		<label class="cbi-value-title tippable" data-tip="<%:Upload Shared Mesh Keychain.%>"><%:Upload Shared Mesh Keychain%></label>
		<input type="file" name="upload" id="media" />
		<div class="upload-description">
		  <%:If a Shared Mesh Keychain file was provided to you by a network administrator or another community member, select and upload it here to join this device to an existing mesh network.%>
		</div>
	  </div>
	</div>
  </div>
  <input type="submit" name="submit" value="<%:Upload%>"/>
</form>

<h2><%:Create a new Shared Mesh Keychain%></h2>
<form method="post" action="<%=uri_prefix%>_new" enctype="multipart/form-data" id="new_keyring">
  <div id="zone-content-wrapper">
	<div id="zone-content">
	  <div class="cbi-value">
		<label class="cbi-value-title tippable" data-tip="<%:Create a new Shared Mesh Keychain file. This will DELETE the existing Shared Mesh Keychain on this device. Use this option if you are creating a brand new Commotion mesh network, or if you are changing the Shared Mesh Keyhchain on an existing network. In either case, create a backup of the existing Shared Mesh Keychain first.%>"><%:New Shared Mesh Keychain%></label>
		<input type="hidden" name="new_keyring" value="true" />
		<div class="upload-description">
		  <%:Create a new Shared Mesh Keychain file. This will DELETE the existing Shared Mesh Keychain on this device. Use this option if you are creating a brand new Commotion mesh network, or if you are changing the Shared Mesh Keyhchain on an existing network. In either case, create a backup of the existing Shared Mesh Keychain first.%>
		</div>
	  </div>
	</div>
  </div>
  <input type="submit" name="new_keyring" value="<%:Create New Shared Mesh Keychain%>" />
</form>



<%+footer%>
